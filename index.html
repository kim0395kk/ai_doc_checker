<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>AI 민원 분류 데모</title>
<style>
  body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;max-width:700px;margin:40px auto;padding:0 20px}
  h1{text-align:center;color:#333}
  textarea{width:100%;min-height:140px;padding:12px;border:1px solid #ccc;border-radius:8px;font-size:16px;box-sizing:border-box}
  button{margin-top:12px;width:100%;padding:12px;background:#007bff;color:#fff;border:0;border-radius:8px;font-size:18px;font-weight:bold;cursor:pointer}
  button:disabled{background:#6c757d}
  #result{margin-top:20px;min-height:30px;font-size:1.2em;text-align:center}
</style>
</head>
<body>
  <h1>🤖 AI 민원 분류</h1>
  <p>민원 대화(또는 문장)를 입력해 보세요.</p>
  <textarea id="complaintText" placeholder="예) 도로에 고라니 로드킬이 있습니다."></textarea>
  <button id="runBtn">분류하기</button>
  <div id="result"></div>

<script>
const btn   = document.getElementById('runBtn');
const area  = document.getElementById('complaintText');
const result= document.getElementById('result');

btn.addEventListener('click', async () => {
  const text = area.value.trim();
  if (!text) {
    result.innerHTML = '<span style="color:red">내용을 입력하세요.</span>';
    return;
  }
  btn.disabled = true;
  result.textContent = '분석 중…';

  try {
    const r = await fetch('/api/classify', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({ text })
    });
    if (!r.ok) throw new Error(r.status);
    const { category } = await r.json();
    result.innerHTML = `분야: <strong style="color:#007bff">${category}</strong>`;
  } catch (e) {
    console.error(e);
    result.innerHTML = '<span style="color:red">분류 실패</span>';
  }
  btn.disabled = false;
});
</script>
</body>
</html>
